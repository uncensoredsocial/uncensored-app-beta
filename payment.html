<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Subscription - Uncensored Social</title>

  <!-- Font Awesome -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />

  <!-- Global styles -->
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/icons.css" />
  <!-- Payment page styles -->
  <link rel="stylesheet" href="css/payment-styles.css" />
</head>
<body class="payment-page">
  <!-- TOP BAR (simple, matches style theme) -->
  <header class="top-bar">
    <div class="top-bar-inner">
      <div class="top-bar-left">
        <a href="index.html" class="top-bar-logo">
          <span class="logo-dot"></span>
          <span>Uncensored Social</span>
        </a>
      </div>
      <div class="top-bar-right">
        <span class="top-bar-pill">Subscriptions</span>
      </div>
    </div>
  </header>

  <main class="payment-main">
    <!-- Centered subscription text at top -->
    <section class="subscription-header">
      <h1>Support Uncensored Social</h1>
      <p>
        Upgrade your account, unlock creator tools, and help fund privacy-first features,
        mobile apps, and platform growth.
      </p>
    </section>

    <!-- Plan picker -->
    <section class="subscription-plans">
      <div class="plans-toggle" id="plansToggle">
        <button
          class="plan-card active"
          data-plan="monthly"
          type="button"
        >
          <div class="plan-card-top">
            <span class="plan-name">Monthly</span>
            <span class="plan-tag">Most flexible</span>
          </div>
          <div class="plan-price-row">
            <span class="plan-price">$8</span>
            <span class="plan-price-detail">per month</span>
          </div>
        </button>

        <button
          class="plan-card"
          data-plan="yearly"
          type="button"
        >
          <div class="plan-card-top">
            <span class="plan-name">Yearly</span>
            <span class="plan-tag plan-tag-accent">Best value</span>
          </div>
          <div class="plan-price-row">
            <span class="plan-price">$60</span>
            <span class="plan-price-detail">per year</span>
          </div>
        </button>
      </div>

      <ul class="plan-features">
        <li><i class="fa-solid fa-shield-halved"></i> Extra privacy-focused features as they roll out</li>
        <li><i class="fa-solid fa-badge-check"></i> Verified badge on your profile while active</li>
        <li><i class="fa-solid fa-link"></i> Custom link in bio</li>
        <li><i class="fa-solid fa-video"></i> Access to creator tools (like streaming / premium posts when live)</li>
        <li><i class="fa-solid fa-heart"></i> Directly supports development of iOS/Android apps & infrastructure</li>
      </ul>
    </section>

    <!-- Coin selector -->
    <section class="payment-methods">
      <h2>Choose your payment currency</h2>
      <div class="coin-grid" id="coinGrid">
        <button class="coin-card" data-currency="BTC" type="button">
          <div class="coin-left">
            <img src="bitcoin.png" alt="Bitcoin" />
            <div class="coin-meta">
              <span class="coin-name">Bitcoin</span>
              <span class="coin-symbol">BTC</span>
            </div>
          </div>
          <div class="coin-right">
            <span class="coin-price" id="btcPriceUsd">—</span>
            <span class="coin-pill coin-pill-muted">Not yet supported</span>
          </div>
        </button>

        <button class="coin-card" data-currency="ETH" type="button">
          <div class="coin-left">
            <img src="ethereum.png" alt="Ethereum" />
            <div class="coin-meta">
              <span class="coin-name">Ethereum</span>
              <span class="coin-symbol">ETH</span>
            </div>
          </div>
          <div class="coin-right">
            <span class="coin-price" id="ethPriceUsd">—</span>
            <span class="coin-pill coin-pill-muted">Not yet supported</span>
          </div>
        </button>

        <button class="coin-card" data-currency="SOL" type="button">
          <div class="coin-left">
            <img src="solana.png" alt="Solana" />
            <div class="coin-meta">
              <span class="coin-name">Solana</span>
              <span class="coin-symbol">SOL</span>
            </div>
          </div>
          <div class="coin-right">
            <span class="coin-price" id="solPriceUsd">—</span>
            <span class="coin-pill coin-pill-muted">Not yet supported</span>
          </div>
        </button>

        <button class="coin-card" data-currency="USDC" type="button">
          <div class="coin-left">
            <img src="usdc.png" alt="USDC" />
            <div class="coin-meta">
              <span class="coin-name">USD Coin</span>
              <span class="coin-symbol">USDC</span>
            </div>
          </div>
          <div class="coin-right">
            <span class="coin-price" id="usdcPriceUsd">—</span>
            <span class="coin-pill coin-pill-muted">Not yet supported</span>
          </div>
        </button>

        <button class="coin-card" data-currency="USDT" type="button">
          <div class="coin-left">
            <img src="usdt.png" alt="USDT" />
            <div class="coin-meta">
              <span class="coin-name">Tether</span>
              <span class="coin-symbol">USDT</span>
            </div>
          </div>
          <div class="coin-right">
            <span class="coin-price" id="usdtPriceUsd">—</span>
            <span class="coin-pill coin-pill-muted">Not yet supported</span>
          </div>
        </button>

        <button class="coin-card active" data-currency="XMR" type="button">
          <div class="coin-left">
            <img src="monero.png" alt="Monero" />
            <div class="coin-meta">
              <span class="coin-name">Monero</span>
              <span class="coin-symbol">XMR</span>
            </div>
          </div>
          <div class="coin-right">
            <span class="coin-price" id="xmrPriceUsd">—</span>
            <span class="coin-pill">Private payments</span>
          </div>
        </button>
      </div>
    </section>

    <!-- Summary + continue button -->
    <section class="payment-summary">
      <div class="summary-row">
        <span class="summary-label">Selected plan</span>
        <span class="summary-value" id="summaryPlanLabel">Monthly • $8.00</span>
      </div>
      <div class="summary-row">
        <span class="summary-label">Pay with Monero</span>
        <span class="summary-value" id="summaryXmrAmount">— XMR (calculating…)</span>
      </div>

      <button id="continueToPaymentBtn" class="btn-primary wide-btn" type="button">
        Continue to payment
      </button>

      <p class="summary-note">
        You’ll get a Monero payment address and QR code. The invoice will stay active for about
        30 minutes. Once it’s fully confirmed on-chain, your subscription and verified check
        will activate automatically.
      </p>

      <div id="subscriptionStatus" class="subscription-status">
        <!-- Filled from /api/subscription/me -->
      </div>
    </section>

    <!-- Live invoice area -->
    <section id="invoiceSection" class="invoice-section" hidden>
      <h2>Your Monero invoice</h2>
      <p class="invoice-hint">
        Send exactly the amount below to this address. Your subscription will activate once the
        payment has enough confirmations.
      </p>

      <div class="invoice-grid">
        <div class="invoice-left">
          <div class="invoice-amount">
            <span class="invoice-label">Amount to pay</span>
            <span id="invoiceAmountXmr" class="invoice-value">— XMR</span>
            <span id="invoiceAmountUsd" class="invoice-subvalue">≈ $0.00</span>
          </div>

          <div class="invoice-address">
            <span class="invoice-label">Monero address</span>
            <div class="address-row">
              <span id="invoiceAddress" class="address-text">—</span>
              <button id="copyAddressBtn" class="copy-btn" type="button">
                <i class="fa-regular fa-copy"></i>
              </button>
            </div>
          </div>

          <div class="invoice-status-row">
            <div>
              <span class="invoice-label">Status</span>
              <span id="invoiceStatus" class="invoice-status-text">Waiting for payment…</span>
            </div>
            <div class="invoice-timer">
              <span class="invoice-label">Expires in</span>
              <span id="invoiceCountdown" class="invoice-countdown">30:00</span>
            </div>
          </div>
        </div>

        <div class="invoice-right">
          <div class="qr-wrapper">
            <img id="invoiceQr" src="" alt="Monero payment QR" />
          </div>
          <p class="qr-caption">
            Scan with your Monero wallet to fill in the address and amount automatically.
          </p>
        </div>
      </div>
    </section>
  </main>

  <!-- Bottom nav (same pattern as other pages) -->
  <nav class="bottom-nav">
    <a href="index.html" class="nav-item">
      <i class="fa-solid fa-house"></i>
      <span>Home</span>
    </a>
    <a href="search.html" class="nav-item">
      <i class="fa-solid fa-magnifying-glass"></i>
      <span>Search</span>
    </a>
    <a href="notifications.html" class="nav-item">
      <i class="fa-regular fa-bell"></i>
      <span>Alerts</span>
    </a>
    <a href="messages.html" class="nav-item">
      <i class="fa-regular fa-envelope"></i>
      <span>Messages</span>
    </a>
  </nav>

  <!-- Scripts -->
  <script src="js/auth.js"></script>
  <script src="js/app.js"></script>
  <script src="js/payment.js"></script>
</body>
</html>
